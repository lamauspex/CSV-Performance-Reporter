# Contributing

Спасибо за интерес к развитию CSV Performance Reporter! Это руководство поможет вам внести свой вклад в проект.

## Содержание

- [Кодекс поведения](#кодекс-поведения)
- [Как внести вклад](#как-внести-вклад)
- [Настройка среды разработки](#настройка-среды-разработки)
- [Стандарты разработки](#стандарты-разработки)
- [Тестирование](#тестирование)
- [Документация](#документация)
- [Pull Request процесс](#pull-request-процесс)
- [Сообщения об ошибках](#сообщения-об-ошибках)
- [Лицензия](#лицензия)

## Кодекс поведения

Мы стремимся создать дружелюбное и инклюзивное сообщество. Пожалуйста, будьте уважительны и конструктивны во всех взаимодействиях.

## Как внести вклад

Вы можете внести вклад следующими способами:

- **Сообщения об ошибках** - найденные баги и проблемы
- **Предложения новых функций** - идеи для улучшения
- **Улучшение документации** - исправления и дополнения
- **Исправления кода** - багфиксы и улучшения
- **Добавление тестов** - улучшение покрытия тестами

## Настройка среды разработки

### Требования

- Python 3.7 или выше
- Git

### Клонирование репозитория

```bash
git clone https://github.com/your-username/CSV-Performance-Reporter.git
cd CSV-Performance-Reporter
```

### Установка зависимостей

```bash
# Создание виртуального окружения (рекомендуется)
python -m venv venv

# Активация виртуального окружения
# На Windows:
venv\\Scripts\\activate
# На macOS/Linux:
source venv/bin/activate

# Установка зависимостей
pip install -r requirements.txt

# Установка зависимостей для разработки
pip install -r requirements-dev.txt
```

### Установка pre-commit хуков (опционально)

```bash
pip install pre-commit
pre-commit install
```

## Стандарты разработки

### Стиль кода

Мы следуем стандартам PEP 8 для Python кода:

- Используйте 4 пробела для отступов
- Максимальная длина строки: 88 символов
- Используйте `snake_case` для переменных и функций
- Используйте `PascalCase` для классов
- Добавляйте docstrings для всех публичных методов

### Type Hints

Обязательно используйте type hints для всех функций и методов:

```python
from typing import List, Dict, Any

def process_data(data: List[Dict[str, Any]]) -> List[Dict[str, Any]]:
    """Обрабатывает данные сотрудников."""
    pass
```

### Именование

- **Файлы**: `snake_case.py`
- **Классы**: `PascalCase`
- **Функции/переменные**: `snake_case`
- **Константы**: `UPPER_CASE`

### Docstrings

Используйте Google style docstrings:

```python
def load_data(file_paths: List[str]) -> List[Dict[str, Any]]:
    """
    Загружает данные из CSV файлов.
    
    Args:
        file_paths: Список путей к CSV файлам
        
    Returns:
        Список словарей с данными сотрудников
        
    Raises:
        FileNotFoundError: Если файл не найден
        ValueError: Если данные некорректны
    """
    pass
```

## Тестирование

### Запуск всех тестов

```bash
pytest
```

### Запуск тестов с подробным выводом

```bash
pytest -v
```

### Запуск тестов с покрытием

```bash
pytest --cov=src --cov-report=html
```

### Запуск конкретного теста

```bash
pytest tests/test_csv_processor.py -v
```

### Требования к тестам

- Все новые функции должны иметь тесты
- Исправления багов должны включать регрессионные тесты
- Стремитесь к покрытию кода 90%+
- Используйте meaningful test names
- Группируйте тесты по функциональности

### Пример теста

```python
import pytest
from src.csv_processor import CSVProcessor

class TestCSVProcessor:
    def test_load_data_success(self):
        """Тест успешной загрузки данных."""
        processor = CSVProcessor()
        data = processor.load_data(['tests/fixtures/employees.csv'])
        
        assert len(data) > 0
        assert 'name' in data[0]
        assert 'performance' in data[0]
    
    def test_load_data_file_not_found(self):
        """Тест обработки отсутствующего файла."""
        processor = CSVProcessor()
        
        with pytest.raises(FileNotFoundError):
            processor.load_data(['nonexistent.csv'])
```

## Документация

### Обновление документации

При изменении API обязательно обновляйте:

1. **API документацию** в `docs/api/`
2. **README.md** - основную информацию
3. **CHANGELOG.md** - список изменений
4. **Docstrings** в коде

### Форматирование документации

- Используйте Markdown для документации
- Код в блоках должен иметь указание языка
- Включайте примеры использования
- Обновляйте диаграммы при изменении архитектуры

### Проверка документации

```bash
# Проверка орфографии (если настроена)
# make spellcheck

# Валидация ссылок
# make linkcheck
```

## Pull Request процесс

### Подготовка PR

1. **Создайте feature branch**

```bash
git checkout -b feature/your-feature-name
```

2. **Внесите изменения** следуя стандартам проекта

3. **Запустите тесты** и убедитесь, что все проходят

4. **Обновите документацию** при необходимости

5. **Проверьте код** на соответствие стандартам

```bash
# Проверка стиля кода
flake8 src/

# Проверка type hints
mypy src/

# Форматирование кода
black src/
isort src/
```

### Описание PR

Хорошее описание PR должно содержать:

- **Краткое описание** изменений
- **Что было изменено** и почему
- **Как тестировались** изменения
- **Скриншоты** (если применимо)
- **Связанные issues** (#номер)

### Шаблон PR

```markdown
## Описание
Краткое описание изменений

## Тип изменений
- [ ] Bug fix (не нарушающий функциональность)
- [ ] Новая функция
- [ ] Breaking change
- [ ] Документация
- [ ] Рефакторинг

## Тестирование
- [ ] Новые тесты добавлены
- [ ] Все тесты проходят локально
- [ ] Ручное тестирование выполнено

## Чек-лист
- [ ] Код следует стандартам проекта
- [ ] Self-review кода выполнен
- [ ] Комментарии добавлены в сложных местах
- [ ] Документация обновлена
- [ ] Тесты добавлены/обновлены

## Связанные Issues
Closes #номер
```

### Review процесс

1. **Automated checks** должны пройти
2. **Code review** от мейнтейнеров
3. **Все замечания** должны быть исправлены
4. **Финальное одобрение** от ревьюера

## Сообщения об ошибках

### Перед созданием issue

1. **Проверьте** существующие issues
2. **Воспроизведите** ошибку
3. **Подготовьте** минимальный пример

### Шаблон Bug Report

```markdown
## Описание бага
Краткое описание проблемы

## Воспроизведение
Шаги для воспроизведения:
1. Запустите '...'
2. Укажите аргументы '...'
3. Увидите ошибку '...'

## Ожидаемое поведение
Что должно происходить

## Фактическое поведение
Что происходит на самом деле

## Скриншоты
Если применимо

## Окружение
- OS: [например Ubuntu 20.04]
- Python версия: [например 3.9.7]
- Версия проекта: [например 1.0.0]

## Дополнительная информация
Любая другая информация
```

### Шаблон Feature Request

```markdown
## Описание функции
Краткое описание желаемой функциональности

## Проблема
Какую проблему решает эта функция

## Предлагаемое решение
Как вы видите решение

## Альтернативы
Другие решения, которые вы рассматривали

## Дополнительная информация
Любая другая информация
```

## Лицензия

Внося свой вклад, вы соглашаетесь с тем, что ваши вклады будут лицензированы под той же лицензией, что и проект.

## Разработчики

Список основных разработчиков проекта:

- **Автор проекта** - [GitHub](https://github.com/lamauspex)

## Контакты

Если у вас есть вопросы о вкладе в проект:

- **Issues** - для обсуждения проблем и предложений
- **Discussions** - для общих вопросов
- **Email** - для приватных вопросов

## Ресурсы

- [PEP 8 - Style Guide for Python Code](https://pep8.org/)
- [Google Python Style Guide](https://google.github.io/styleguide/pyguide.html)
- [Writing Great Git Commit Messages](https://chris.beams.io/posts/git-commit/)
- [GitHub Flow](https://guides.github.com/introduction/flow/)

---

**Спасибо за ваш вклад в CSV Performance Reporter!** 